<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>NYC Restaurants</title>
  </head>
  <body>
    <h2>NYC Restaurant Finder</h2>
    <p>
      This simple page demonstrates how Stitch can host your application
      front-end.
    </p>

    <form>
      Restaurant name: <input type="text" id="name" name="name">
    </form>

    <button type="submit" onclick="userAction()">Search</button>

    <p id="results"></p>

    <script>
      
      const userAction = async () => {
        var txt

        var searchString = document.getElementById("name").value
	webhook_url = "https://webhooks.mongodb-stitch.com/api/client/v2.0/app/workshop-lhvdy/service/restaurants/incoming_webhook/getRestaurantsByName"
        url = webhook_url + "?arg=" + searchString
        console.log(url)

        const response = await fetch(url);
        const myJson = await response.json(); //extract JSON from the http response
        console.log(myJson);
        
          txt = myJson.name + "<br>"
          txt += myJson.address.building + " " + myJson.address.street + "<br>"
          txt += myJson.borough + "<br>"
      
        document.getElementById("results").innerHTML = txt;
        
      };
    </script>
  </body>
</html>
